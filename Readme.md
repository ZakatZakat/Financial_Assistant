# Финансовый Ассистент

## Обзор
Проект "Финансовый Ассистент" предназначен для решения задачи разработки банковского виртуального ассистента. Этот ассистент анализирует тон диалога между менеджером и клиентом, предоставляет соответствующие рекомендации и подводит итоги встречи.

## Цели проекта
Проект делится на три основные части:
1. **Преобразование аудио в текст:** Интеграция модели ASR для преобразования устного диалога в текст.
2. **Анализ тональности:** Обработка текста диалога для оценки общего тона и эмоциональных параметров клиента.
   - При необходимости, текст можно перевести с русского на английский с помощью модели [Helsinki-NLP/opus-mt-ru-en](https://huggingface.co/Helsinki-NLP/opus-mt-ru-en).
3. **Суммаризация диалога:** Применение модели для суммирования содержания разговора.

## Технологический стек
- **Фронтенд:** HTML, JavaScript
- **Бэкенд:** Python, Flask
- **Модели машинного обучения:**
  - Оценка тональности и эмоций: [ProsusAI/finbert](https://huggingface.co/ProsusAI/finbert), [joeddav/distilbert-base-uncased-go-emotions-student](https://huggingface.co/joeddav/distilbert-base-uncased-go-emotions-student)

## Функционал
Пользователи могут записывать свой голос через интерфейс сайта. Записи преобразуются в текст, который отображается на сайте и сохраняется в лог-файле (`saved_log/log.txt`). В интерфейсе присутствует индикатор "Температура клиента", показывающий текущее эмоциональное состояние клиента на шкале от 0 до 1. Информация об эмоциональных коэффициентах клиента отображается в нижней части страницы: представленные эмоции можно посмотреть в файле <details>
<summary>Список эмоций (нажмите, чтобы раскрыть)</summary>

- восхищение
- развлечение
- гнев
- нудьга
- одобрение
- забота
- замешательство
- интерес
- притязание
- негативное отношение
- разочарование
- отвратение
- смущение
- восторг
- страх
- благодарность
- горе
- радость
- любовь
- нервозность
- оптимизм
- гордость
- осознание
- облегчение
- признак
- грусть
- удивление
- нейтралитет

</details>


## Выбор моделей и их применение

### Запись голоса и распознавание речи
Для задачи записи голоса использовалась модель `webkitSpeechRecognition`, которая является частью Web Speech API. Этот API поддерживается в Chrome и других браузерах на базе движка WebKit, но может иметь ограничения в браузерах, таких как Firefox или Internet Explorer. Тестирование показало, что модель `webkitSpeechRecognition` наиболее точно и быстро работает с русским языком, обеспечивая эффективное преобразование речи в текст.

### Перевод текста для анализа тональности
Для повышения качества анализа тональности текста, чаще всего необходим перевод с русского на английский, так как многие современные модели обучены на англоязычных данных. В этом случае использовалась модель перевода [Helsinki-NLP/opus-mt-ru-en](https://huggingface.co/Helsinki-NLP/opus-mt-ru-en), которая показала хорошие результаты при выполнении данной задачи.

### Анализ тональности текста
Для оценки общего тона текста диалога применялась модель [ProsusAI/finbert](https://huggingface.co/ProsusAI/finbert), специализированная адаптация модели BERT для финансового сектора. Эта модель предварительно обучена на большом объеме финансовых текстов, что позволяет ей точно определять и интерпретировать тональность финансовых документов. Результат работы модели представляется в виде трёх меток тональности: положительной, нейтральной и отрицательной. Скор нормализуется по формуле:
<p>Нормализованная метрика = (S - min(S)) / (max(S) - min(S))</p>
<p>где <code>S</code> — взвешенная сумма, <code>min(S)</code> и <code>max(S)</code> — минимальное и максимальное возможные значения <code>S</code>, равные -1 и +1 соответственно.</p>


### Анализ эмоциональных параметров текста
Для выявления эмоциональных параметров в диалоге использовалась модель [joeddav/distilbert-base-uncased-go-emotions-student](https://huggingface.co/joeddav/distilbert-base-uncased-go-emotions-student), упрощенная версия DistilBERT, обученная на датасете "GoEmotions". Модель распознаёт широкий спектр эмоциональных состояний, что делает её идеальным инструментом для анализа текстов, где важно понимание глубины эмоционального контекста.

<details>
<summary>Пример диалога с финансовым менеджером с негативной тональностью (нажмите, чтобы раскрыть)</summary>
   
**Клиент**: Здравствуйте, я хотел бы обсудить свои инвестиции с вами.

**Финансовый менеджер**: Здравствуйте. Конечно, давайте посмотрим на ваш портфель. О, у вас небольшие потери в последнее время.

**Клиент**: Да, я обеспокоен этим. Почему мои инвестиции идут вниз?

**Финансовый менеджер**: Ну, рынок несколько нестабильный в последнее время. Ваш портфель просто отражает общую тенденцию.

**Клиент**: Но я ожидал получить прибыль. Почему вы не предупредили меня о возможных рисках?

**Финансовый менеджер**: Мы всегда предупреждаем о рисках инвестирования. Вы должны были быть готовы к колебаниям на рынке.

**Клиент**: Но я доверял вам управлять моими деньгами. Почему вы не сделали лучших инвестиций?

**Финансовый менеджер**: Мы следим за вашим портфелем и делаем все возможное для его роста. Иногда рыночные условия просто не в нашу пользу.

**Клиент**: Это неприемлемо. Я ожидал большего от вас. Возможно, мне стоит найти другого финансового консультанта.

**Финансовый менеджер**: Если вы считаете, что это лучше для вас, то конечно можете сделать свой выбор. Но помните, что рыночные колебания нормальное явление, и инвестиции всегда связаны с риском.

**Показатели**:
**Температура клиента**: 0.26886869221925735

**Результаты по эмоциональным коэффициентам**:
**забота**: 0.09765517711639404
**замешательство**: 0.0975726842880249
**интерес**: 0.07371485978364944
**притязание**: 0.0799650028347969
**разочарование**: 0.07040069252252579
</details>

## Установка и запуск
Для начала работы с проектом:
1. Клонируйте репозиторий.
2. Установите зависимости.
3. Запустите сервер командой:


